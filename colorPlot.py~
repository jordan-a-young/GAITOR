import numpy as np
import cv2
import matplotlib.pyplot as plt
import sys

def getSum(video,hor):

    cap = cv2.VideoCapture(video)
    cv2.namedWindow('test')
    r, f =  cap.read()
    print "f shape"
    print f.shape
    h = f.shape[0]
    w = f.shape[1]
    z = f .shape[2]
    total = np.zeros([h-hor,w])

    fbgb = cv2.createBackgroundSubtractorMOG()

    while(1):
        ret, frame = cap.read()
        
       
        gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
        bot = gray[hor:h,0:w] 
        fgmask = fgbg.apply(bot)
        if bot.any():
            
            total +=fgmask
        else:
            pass

        cv2.imshow('test',bot)
        if cv2.waitKey(60) & 0xFF ==ord('q'):
            break


    return total

def colormap(image):
    lum_img = image[:,:,0]

    im = plt.imshow(lum_img)
    plt.show()


if __name__ == "__main__":

    image = getSum(sys.argv[1],244)
    colormap(image)



